# User specific aliases and functions
. $HOME/.asdf/asdf.sh

task_arn=$(aws ecs list-task-definitions --family-prefix meadow-all | jq -r '.taskDefinitionArns[0]')
config=$(aws ecs describe-task-definition --task-definition $task_arn)
vars=$(jq -r '.taskDefinition.containerDefinitions[] | select(.name == "meadow") | .environment[] | "export \(.name)=\"\(.value)\""' <<< "$config")
eval $(echo "$vars")
export AWS_REGION=us-east-1
export MEADOW_HOSTNAME="${host_name}"
export MEADOW_PROCESSES="none"
export REAL_AWS_CONFIG="true"
export HONEYBADGER_ENVIRONMENT="${environment}-ec2"
export SHARED_BUCKET="${shared_bucket}"

cd ~/meadow
git fetch -pa origin
git pull